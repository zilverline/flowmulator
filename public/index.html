<html>
	<head>
		<title>Flowmulator</title>

		<script type="text/javascript" src="javascripts/ext/underscore.js"></script>
		<script type="text/javascript" src="javascripts/ext/jquery-1.7.1.js"></script>
		<script type="text/javascript" src="javascripts/ext/jshashtable-2.1.js"></script>
		<script type="text/javascript" src="javascripts/ext/jquery.numeric.js"></script>
		<script type="text/javascript" src="javascripts/ext/jquery.numberformatter.js"></script>
		<script type="text/javascript" src="javascripts/ext/backbone.js"></script>
		<script type="text/javascript" src="javascripts/ext/icanhaz.js"></script>

		<script type="text/javascript" src="javascripts/app/WorkItem.js"></script>
		<script type="text/javascript" src="javascripts/app/ReadyWorkProvider.js"></script>
		<script type="text/javascript" src="javascripts/app/Backlog.js"></script>
		<script type="text/javascript" src="javascripts/app/Stage.js"></script>
		<script type="text/javascript" src="javascripts/app/Board.js"></script>
		<script type="text/javascript" src="javascripts/app/Flowmulator.js"></script>
		<script type="text/javascript" src="javascripts/app/ControlPanel.js"></script>

		<script type="text/javascript" src="javascripts/boot.js"></script>

		<script id="work-item-template" type="text/template">
			<h1><%= workItem.get('name') %></h1>
      <table class="stage-efforts">
        <tr>
          <td>Analysis:</td>
          <td><%= workItem.get('analysis') %></td>
        </tr>
        <tr>
          <td>Design:</td>
          <td><%= workItem.get('design') %></td>
        </tr>
        <tr>
          <td>Code:</td>
          <td><%= workItem.get('code') %></td>
        </tr>
        <tr>
          <td>Test:</td>
          <td><%= workItem.get('test') %></td>
        </tr>
        <tr>
          <td>Release:</td>
          <td><%= workItem.get('release') %></td>
        </tr>
        <% if(workItem.get('remainingEffortInStage') > 0) { %>
        <tr>
          <td>Remaining effort:</td>
          <td><%= workItem.get('remainingEffortInStage') %></td>
        </tr>
        <% } %>
      </table>
		</script>

		<script id="stage-template" type="text/template">
      <button class="run-stage">Run stage</button>
			<div class="header">
				<h1><%= stage.get('name') %></h1>
				<h3>Velocity: <%= stage.get('velocity') %></h3>
			</div>
      <div class="column">
        <div class="header">
          <h2>In Progress</h2>
        </div>
        <ul class="work-items">
        <% _(stage.get('inProgressWork')).each(function(workItem){ %>
          <li class="work-item"><%= _.template($('#work-item-template').html(), {workItem: workItem}) %></li>
        <% }) %>
        </ul>
      </div>
      <div class="column">
        <div class="header">
          <h2>Ready</h2>
        </div>
        <ul class="work-items">
          <% _(stage.get('readyWork')).each(function(workItem){ %>
          <li class="work-item"><%= _.template($('#work-item-template').html(), {workItem: workItem}) %></li>
          <% }) %>
        </ul>
      </div>
		</script>

		<script id="control-panel-template" type="text/template">
			<button id="run-one-day">Run one day</button>
		</script>

		<link rel="stylesheet" href="stylesheets/main.css" type="text/css" media="screen" charset="utf-8">
	</head>
	<body>
		<div id="container"></div>
	</body>
</html>